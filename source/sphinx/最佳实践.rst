========
最佳实践
========

参考资料汇总
------------

参考网站:

- `reStructuredText 参考 <https://documatt.com/restructuredtext-reference/>`_

如何切换 HTML 主题
------------------

本节参考资料:

- `Sphinx 官方内建主题文档 <https://sphinx-doc.cn/en/master/usage/theming.html>`_
- `Sphinx 内建和第三方主题展示 <https://sphinx-themes.org/>`_
- `furo 主题官方文档 <https://pradyunsg.me/furo/quickstart/>`_

如果使用内建主题,这里以 ``alabaster`` 主题为例,修改 ``conf.py`` 中的 ``html_theme`` 变量为 ``alabaster``, 相关代码如 :numref:`使用内建 alabaster 主题`:

.. code-block:: python
    :caption: 使用内建 alabaster 主题
    :name: 使用内建 alabaster 主题

    html_theme = "alabaster"

如果使用第三方主题, 这里以 ``furo`` 主题为例:

1. 安装主题 ``pixi add furo``;
2. 参照 :numref:`使用内建 alabaster 主题` 将 ``html_theme`` 修改成 ``furo``.
  

如何插入数学公式
----------------

本节参考资料:

- `math 指令相关选项 <https://sphinx-doc.cn/en/master/usage/configuration.html#options-for-maths>`_

行内数学公式:``:math:`a^2 + b^2 = c^2``` 渲染效果 :math:`a^2 + b^2 = c^2`.

块级数学公式如下 :numref:`块级公式示例 1`:

.. code-block:: rst
    :caption: 块级公式示例 1
    :name: 块级公式示例 1

    .. math::
        a^2 + b^2 = c^2

渲染效果见 :eq:`块级公式示例 1`:

.. math::    
    :label: 块级公式示例 1

    a^2 + b^2 = c^2

数学公示的编号和引用:

1. 在 ``conf.py`` 中将 ``math_numfig`` 设置为 ``True`` 表示启用数学公式编号;
2. 在 ``conf.py`` 中将 ``math_eqref_format`` 设置为 ``"公式-{number} "`` 表示引用锚点的格式;
3. ``math`` 指令的的 ``label`` 选项用于配置锚点, 如果没有 ``label`` 选项则不进行编号;
4. 用 ``:eq:`锚点文本``` 或 ``:math:numref:`锚点文本``` 生成交叉引用.

如何插入代码
-------------

本节参考资料:

- `锚点编号规则 <https://sphinx-doc.cn/en/master/usage/configuration.html#options-for-figure-numbering>`_
- `内置支持的语法高亮语言 <https://pygments.org/languages/>`_

行内代码用两个反引号包裹,例如 ````text```` 被渲染成 ``text`` .

代码块用 ``code-block`` 指令, 如下面的见 :numref:`代码块示例`

.. code-block:: rst
    :caption: 代码块示例
    :name: 代码块示例

    .. code-block:: python

        i = 256 + 256
        print('The value of i is', i)

主参数用于配置语言
:linenos: 无参数,用于显示行号
:emphasize-lines: 参数是行号, 用于强调某一行
:caption: 用于配置标题

如何插入表格
--------------

本节参考资料:

- `RST 原生表格语法 <https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#tables>`_
- `Sphinx 表格增强 <https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#tables>`_

.. code-block:: rst
    :caption: 表格示例代码_1
    :name: 表格示例代码_1

    .. table:: 学生成绩统计表  
        :name: 表格示例_1 
        :widths: 20, 30, 20 
        :align: center 

        +--------+--------+--------+
        | 姓名   | 科目   | 分数   |
        +========+========+========+
        | 张三   | 数学   | 95     |
        +--------+--------+--------+
        | 李四   | 语文   | 92     |
        +--------+--------+--------+

:numref:`表格示例代码_1` 渲染效果如下 :numref:`表格示例_1`

.. table:: 学生成绩统计表  
    :name: 表格示例_1 
    :widths: 20, 30, 20 
    :align: center 

    +--------+--------+--------+
    | 姓名   | 科目   | 分数   |
    +========+========+========+
    | 张三   | 数学   | 95     |
    +--------+--------+--------+
    | 李四   | 语文   | 92     |
    +--------+--------+--------+

如何插入图片
-------------------------

reStructuredText (RST) 格式原生自带了 image 和 figure 这两个用于插入图片的指令. 
其中 image 指令用于简单的图片插入,即仅插入图片,无自动编号,无标题功能. figure 指令在 image 指令的基础上提供了自动编号,标题,引用等功能.

.. code-block:: rst

    .. image:: /_static/images/*.png   
        :align: center
        :width: 90%

        

.. image:: /_static/images/cb415eae31351d256f8214b271c8b43266150368.png
    :align: center
    :width: 90%
